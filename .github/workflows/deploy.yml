name: Trigger Cloudflare Build

on:
    # 1. ç›‘å¬æ¥è‡ªå†…å®¹ä»“åº“çš„ä¿¡å· (ä¿æŒä¸å˜)
    repository_dispatch:
        types:
            - content-updated
    # 2. å…è®¸æ‰‹åŠ¨è§¦å‘ (æ–¹ä¾¿æµ‹è¯•)
    workflow_dispatch:

jobs:
    notify-cloudflare:
        runs-on: ubuntu-latest
        steps:
            - name: Trigger Cloudflare Deploy Hook
              run: |
                  echo "ğŸš€ Received update signal from Content Repo."
                  echo "ğŸ”” Triggering Cloudflare build..."
                  # ä½¿ç”¨ curl å‘é€ POST è¯·æ±‚ç»™ Cloudflare
                  curl -X POST "${{ secrets.CLOUDFLARE_DEPLOY_HOOK }}"
                  echo "âœ… Signal sent!"
